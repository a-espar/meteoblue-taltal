<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Horizonte Wind Farm - Meteoblue Map</title>

  <!-- Mapbox GL -->
  <script
    src="https://static.meteoblue.com/cdn/mapbox-gl-js/v1.11.1/mapbox-gl.js"
    integrity="sha512-v5PfWsWi47/AZBVL7WMNqdbM1OMggp9Ce408yX/X9wg87Kjzb1xqpO2Ul0Oue8Vl9kKOcwPM2MWWkTbUjRxZOg=="
    crossorigin="anonymous"
  ></script>
  <link
    rel="stylesheet"
    href="https://static.meteoblue.com/cdn/mapbox-gl-js/v1.11.1/mapbox-gl.css"
    integrity="sha512-xY1TAM00L9X8Su9zNuJ8nBZsGQ8IklX703iq4gWnsw6xCg+McrHXEwbBkNaWFHSqmf6e7BpxD6aJQLKAcsGSdA=="
    crossorigin="anonymous"
  />

  <!-- Meteoblue Plugin -->
  <script src="https://static.meteoblue.com/lib/maps-plugin/v0.x/maps-plugin.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    #mapContainer {
      height: 100%;
      width: 100%;
    }
    .custom-marker {
      background-image: url("https://www.svgrepo.com/show/489975/wind-turbine.svg");
      background-size: contain;
      background-repeat: no-repeat;
      width: 36px;
      height: 36px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="mapContainer"></div>

  <script>
    const horizonteCoordinates = [-69.833188, -24.969911];

    const mapboxMap = new mapboxgl.Map({
      container: "mapContainer",
      center: horizonteCoordinates,
      zoom: 10,
      minZoom: 0,
      maxZoom: 24,
      hash: true,
      attributionControl: false,
      keyboard: false,
      maxBounds: [[-69.989217, -25.052451], [-69.684616, -24.866181]]
    });

    const apiKey = "CoNOYmRQEU5Xnsr7";
    const inventoryUrl = "https://maps-api.meteoblue.com/v1/map/inventory/filter?lang=es&apikey=CoNOYmRQEU5Xnsr7&maps=windAnimation,wind,cloudsAndPrecipitation,temperature,gust,humidity,warningsAndRisk&temperatureUnit=CELSIUS&velocityUnit=METER_PER_SECOND&lengthUnit=metric&overlays=pressure2mOverlay,graticuleOverlay";

    new meteoblueMapsPlugin({
      mapboxMap: mapboxMap,
      inventory: inventoryUrl,
      apiKey: apiKey,
      timezoneOffsetInSeconds: -14400,
      timezoneAbbreviation: "UTC-4",
      autoplay: true,
      canUseRestricted: true,
    });

    // Wind turbine marker
    // Coordinates for 5 wind turbines
    const turbineCoordinates = [
      [-69.9025661352596,-24.9159453990626],
      [-69.8980510671397,-24.9159997502317],
      [-69.8935059593932,-24.9160089923279],
      [-69.8890005835098,-24.9160359199738],
      [-69.884495394339,-24.9160898018744],
      [-69.8799801025457,-24.9161165158172],
      [-69.8753082209776,-24.9164058970478],
      [-69.8708417190869,-24.9163327124069],
      [-69.8914465444663,-24.9243112977986],
      [-69.888354926576,-24.9268131335483],
      [-69.885442985744,-24.9295305713294],
      [-69.8812083427983,-24.9300974947012],
      [-69.8768936015514,-24.930547373398],
      [-69.9049911951983,-24.9253043156157],
      [-69.9015393931887,-24.9272667780836],
      [-69.8984339529204,-24.9292090143774],
      [-69.8956986977642,-24.9330543902261],
      [-69.8931283814755,-24.936447206409],
      [-69.8898979811848,-24.9389679686991],
      [-69.8868956927103,-24.9415505186531],
      [-69.8846481256399,-24.9444265360175],
      [-69.8823712609206,-24.9487656287869],
      [-69.8803508694235,-24.9529767457579],
      [-69.8647464157283,-24.941120814464],
      [-69.8606516152211,-24.9419301751186],
      [-69.8567773349215,-24.9431264681878],
      [-69.8526298840193,-24.9449383000633],
      [-69.8488868456727,-24.946521952009],
      [-69.8436451605941,-24.9505883677493],
      [-69.8409645141861,-24.9540441525149],
      [-69.8386822597491,-24.9578408073281],
      [-69.8333930229459,-24.9608505698812],
      [-69.830138993852,-24.9630812224354],
      [-69.8270757772396,-24.96571711946],
      [-69.8239817487888,-24.9682086372858],
      [-69.8206537479485,-24.9593409702889],
      [-69.8176499674553,-24.9619944104113],
      [-69.8149859550506,-24.965115520615],
      [-69.8119115026046,-24.9676066851808],
      [-69.8091866644281,-24.9705564459278],
      [-69.8031981536328,-24.9713474397144],
      [-69.7982352474668,-24.9714192843744],
      [-69.7937684143476,-24.9716057169674],
      [-69.7904633141406,-24.9737545160296],
      [-69.7872280791297,-24.9760022101083],
      [-69.8759180961588,-24.9438550113702],
      [-69.8738000055875,-24.9468745968991],
      [-69.8705970598184,-24.9491690285531],
      [-69.8667629108211,-24.9504556532688],
      [-69.8630388286969,-24.9519131223387],
      [-69.8590946160922,-24.9530647329135],
      [-69.8549699154626,-24.9539102396093],
      [-69.8500011262982,-24.9558982956436],
      [-69.8472192086227,-24.9590206387012],
      [-69.9083556105503,-24.9344045987016],
      [-69.9060443044341,-24.937958598918],
      [-69.9035226460477,-24.9412068054241],
      [-69.9005305023165,-24.9437895628752],
      [-69.8976484248167,-24.9465431773105],
      [-69.895470684757,-24.9494640840647],
      [-69.892294017563,-24.9526076777309],
      [-69.8893920021908,-24.9553973789116],
      [-69.8866998083336,-24.9584566895613],
      [-69.8830723798933,-24.9623523026588],
      [-69.8793279532637,-24.9637561183777],
      [-69.8756837761436,-24.9653398609781],
      [-69.870433393928,-24.9681520259324],
      [-69.8664582028682,-24.969186623739],
      [-69.8630239948655,-24.9710939367428],
      [-69.8594701731177,-24.972911558201],
      [-69.8554553524368,-24.9739822173238],
      [-69.8516062624557,-24.9746725414175],
      [-69.8478253572852,-24.9766447067359],
      [-69.8440310326328,-24.9781201774684],
      [-69.8397148209539,-24.978623205387],
      [-69.8352778550254,-24.978855871603],
      [-69.8307805155221,-24.9789532852999],
      [-69.8237010286122,-24.9810967401906],
      [-69.8188034079086,-24.9806090247439],
      [-69.8144368529527,-24.9810212948128],
      [-69.8097980040941,-24.98222057518],
      [-69.8062080086082,-24.9847415227769],
      [-69.906174575082,-24.9530566784679],
      [-69.9035728579463,-24.9562331298613],
      [-69.9008110767602,-24.9592118364739],
      [-69.8979789068164,-24.9620644922167],
      [-69.894786144481,-24.9643864682906],
      [-69.8918141218603,-24.9671134249067],
      [-69.8894013915967,-24.9704871745024],
      [-69.885226687653,-24.9713157633871],
      [-69.8807655972392,-24.9736720741712],
      [-69.8770642729487,-24.975617409955],
      [-69.8735509336053,-24.9775434917014],
      [-69.8697762157735,-24.9789472542451],
      [-69.8659718147032,-24.9803691561942],
      [-69.8618609536848,-24.981901102847],
      [-69.8581057142026,-24.9832954308775],
      [-69.85434054236,-24.9846987531242],
      [-69.8504249906625,-24.9858590184977],
      [-69.8464892379014,-24.9869741447286],
      [-69.8417303322741,-24.9865315541891],
      [-69.8370724893717,-24.9863772177721],
      [-69.8297794157359,-24.9847925730563],
      [-69.8308778743763,-24.9919656850248],
      [-69.8212836581333,-24.9885692999632],
      [-69.8161709342405,-24.9885613082923],
      [-69.8125556151,-24.9902517395024],
      [-69.8081600445456,-24.992343667332],
      [-69.8035349606183,-24.9942109442661],
      [-69.7994979957437,-24.9951086537501],
      [-69.7939746575226,-24.9929257507845],
      [-69.7892966556891,-24.9927519686633],
      [-69.7839738850605,-24.9971508967947],
      [-69.7793957831061,-24.9971297991305],
      [-69.7760396993037,-24.9991972804956],
      [-69.771792175566,-24.9997612118537],
      [-69.9022424647407,-24.9748348054952],
      [-69.898078729272,-24.9771807968241],
      [-69.8944444552688,-24.9787830004224],
      [-69.890730047639,-24.9802772316504],
      [-69.8870559539249,-24.9818794964999],
      [-69.8834516947762,-24.9835625315635],
      [-69.879867150342,-24.9852453644947],
      [-69.8759416793856,-24.9863702336199],
      [-69.8719963822359,-24.9875041471352],
      [-69.8682507512941,-24.9888625533505],
      [-69.8644160535125,-24.9902484755201],
      [-69.8606521955175,-24.9918596517146],
      [-69.8567568634586,-24.9931012432169],
      [-69.8528212562068,-24.9942616909423],
      [-69.8487263555691,-24.9953236096909],
      [-69.8449394702849,-24.9965191248624],
      [-69.8410140960575,-24.9977604802478],
      [-69.8370984876027,-24.9989926480166],
      [-69.8328420633481,-24.9996577027233],
      [-69.8283536297206,-24.9997188863852],
      [-69.8236471335935,-24.9997721117328],
      [-69.8190496856917,-24.9998336183259],
      [-69.8144325897806,-24.9999221819616],
      [-69.8098547039452,-24.9999471753613]
    ];
    // Add a marker for each turbine
    turbineCoordinates.forEach((coord, index) => {
      const el = document.createElement("div");
      el.className = "custom-marker";
      
      new mapboxgl.Marker(el)
        .setLngLat(coord)
        .setPopup(new mapboxgl.Popup().setText(`WEC ${index + 1}`))
        .addTo(mapboxMap);
    });

  </script>
</body>
</html>

